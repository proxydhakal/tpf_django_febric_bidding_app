{% extends "partials/base.html" %} 
{% load static %}
{% block navbar %}
    {% include 'partials/navbar.html' %}
{% endblock navbar %}


{% block main %}
<div id="body">
    <div class="container">
        <div class="row">
            <div class="col-md-3"></div>
            <div class="col-md-6">
            <h2 class="mb-1 mt-5 text-center">Submit List</h2>
            <form method="post" id="listForm" data-cities-url="{% url 'ajax_load_lists' %}" novalidate>
                {% csrf_token %}
                <div class="form-group ">
                  {{ form }}
                </div>
                <div class="form-group">
                    <button class="btn btn-info" type="submit">Submit</button>
                </div>
            </form>
            </div>
            <div class="col-md-3"></div>
        </div>   
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script>
  $("#id_parent").change(function () {
    var url = $("#listForm").attr("data-cities-url");
    var parentId = $(this).val();

    $.ajax({
      url: url,
      data: {
        'parent': parentId
      },
      success: function (data) {
        $("#id_child").html(data);
      }
    });

  });
</script>
{% endblock main %}


{% block footer %}
    {% include 'partials/footer.html' %}
{% endblock footer %}
    
